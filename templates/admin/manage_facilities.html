{% extends "admin/layout_admin.html" %}

{% block content %}
<div class="admin-header">
    <h1 style="color: var(--text-light);">Manage Facilities</h1>
</div>

<div class="glass-card" style="padding: 30px; margin-bottom: 40px;">
    <h3 style="margin-bottom: 20px; color: #ef4444;">Add New Facility</h3>
    <form action="{{ url_for('manage_facilities') }}" method="POST" enctype="multipart/form-data">
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
            <div>
                <label style="display: block; color: var(--text-dim); margin-bottom: 5px;">Facility Name</label>
                <input type="text" name="name" class="form-control" required placeholder="e.g. Central Library"
                    style="width: 100%; padding: 10px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.1); color: white; border-radius: 6px;">
            </div>
            <div>
                <label style="display: block; color: var(--text-dim); margin-bottom: 5px;">FontAwesome Icon
                    Class</label>
                <input type="text" name="icon" class="form-control" placeholder="e.g. fas fa-book"
                    style="width: 100%; padding: 10px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.1); color: white; border-radius: 6px;">
                <small class="text-muted" style="color: rgba(255,255,255,0.5);">Optional. Used if no image is
                    provided.</small>
            </div>
            <div style="grid-column: span 2;">
                <label style="display: block; color: var(--text-dim); margin-bottom: 5px;">Description</label>
                <textarea name="description" class="form-control" rows="2" required placeholder="Short description..."
                    style="width: 100%; padding: 10px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.1); color: white; border-radius: 6px;"></textarea>
            </div>
            <div style="grid-column: span 2;">
                <label style="display: block; color: var(--text-dim); margin-bottom: 5px;">Upload Image</label>
                <input type="file" name="image" class="form-control"
                    style="width: 100%; padding: 10px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.1); color: white; border-radius: 6px;">
                <small class="text-muted" style="color: rgba(255,255,255,0.5);">Overrides icon if provided.</small>
            </div>
        </div>
        <button type="submit" class="btn btn-primary" style="margin-top: 20px; background: #ef4444; border: none;">Add
            Facility</button>
    </form>
</div>

<div class="glass-card" style="padding: 30px;">
    <h3 style="margin-bottom: 20px; color: var(--text-light);">Current Facilities</h3>
    <table>
        <thead>
            <tr>
                <th style="color: var(--text-dim);">Image/Icon</th>
                <th style="color: var(--text-dim);">Name</th>
                <th style="color: var(--text-dim);">Description</th>
                <th style="color: var(--text-dim);">Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for facility in facilities %}
            <tr style="border-bottom: 1px solid rgba(255,255,255,0.05);">
                <td style="padding: 15px 0; width: 80px; text-align: center;">
                    {% if facility.image %}
                    <img src="{{ url_for('static', filename='images/facilities/' + facility.image) }}" alt="img"
                        style="width: 50px; height: 50px; object-fit: cover; border-radius: 5px;">
                    {% else %}
                    <i class="{{ facility.icon }} fa-2x" style="color: var(--text-light);"></i>
                    {% endif %}
                </td>
                <td style="padding: 15px 0; color: var(--text-light); font-weight: 500;">{{ facility.name }}</td>
                <td style="padding: 15px 0; color: var(--text-dim);">{{ facility.description }}</td>
                <td style="padding: 15px 0;">
                    <a href="{{ url_for('delete_facility', id=facility.id) }}" class="action-btn"
                        style="background: #ef4444; color: white; padding: 5px 10px; border-radius: 4px; text-decoration: none;"
                        onclick="return confirm('Are you sure you want to delete this facility?')">
                        <i class="fas fa-trash"></i>
                    </a>
                </td>
            </tr>
            {% else %}
            <tr>
                <td colspan="4" class="text-center py-4"
                    style="color: var(--text-dim); text-align: center; padding: 20px;">No facilities added yet.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}